/* =========================================================
   0) Variables & fondations
   ========================================================= */
:root{
  /* --- Couleurs (tes variables) --- */
  --white:     #ffffff;
  --whiteB:    #f8f8f8;
  --lightGray: #e8e8e8;
  --lightGrayB:#e0e0e0;
  --darkGray:  #d4d4d4;
  --darkGrayB: #ccc;
  --backGray:  #bfbfbf;
  --backGrayB: #bbb;
  --black:     #000000;
  --emphase:   #0080FF;
  --red:       #8b0000;
  --green:     #06402b;

  /* --- Mesures unifiées --- */
  --control-h:   44px;       /* hauteur unique pour TOUT (inputs, selects, tags, boutons, etc.) */
  --header-h:    44px;
  --tab-h:       48px;
  --radius:      12px;       /* border-radius unique */
  --pad-x:       12px;       /* padding horizontal par défaut */
  --pad-y:       10px;       /* padding vertical par défaut */
  --gap:         6px;        /* marge/gap par défaut entre éléments */

  /* --- Typo unifiée --- */
  --font: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  --fs-base: 15px;           /* base */
  --fs-base: 15px;           /* base */
  --fs-small: 13px;          /* petits textes (ex: cellules série) */
  --fs-rpe:    13px;            /* taille spécifique RPE dans série */
  --fw-base:   600;
  --fw-strong: 700;

  /* --- Légers helpers --- */
  --border-default: var(--lightGrayB);
  --border-strong:  var(--darkGrayB);
/* Hauteurs “réelles” en tenant compte des bordures */
  --tabbar-h: calc(var(--tab-h) + 2px);      /* 2px = border-top de .tabbar */
  --header-total-h: calc(var(--header-h) + 2px); /* 2px = border-bottom du header/subheader */
}


/* Reset simple */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: var(--backGray);          /* 4.Fond app */
  color: var(--black);
  font-family: var(--font);
  font-size: var(--fs-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Safe areas iOS */
.safe-top    { padding-top: env(safe-area-inset-top, 0); }
.safe-bottom { padding-bottom: calc(env(safe-area-inset-bottom, 0) + 8px); }

/* États invisibles */
.sr-only{ position:absolute; left:-9999px; }

/* Ecran */
.screen {
  display: flex;
  flex-direction: column;
  min-height: 100svh;
  background: var(--backGray); /* fond global */
}
.screen[hidden] { display: none !important; }
/* Paneau de contenu */
.content {
  flex: 1;
  background: var(--whiteB);                /* panneau blanc */
  border: 1px solid var(--lightGrayB);
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 0px;
  padding-bottom: 0px;
  margin-left: auto;                       /* centré horizontalement */
  margin-right: auto;                      /* centré horizontalement */
  width: 96%;                              /* largeur proportionnelle */
  max-width: 700px;                        /* limite max sur grands écrans */
  min-height: calc(100svh - var(--tabbar-h) - var(--header-total-h) - env(safe-area-inset-bottom, 0));  overflow-y: auto;
}

/* Grilles utilitaires */
.row{ display:flex; align-items:center; gap:var(--gap); }
.row.between{ justify-content:space-between; }
.full{ width:100%; }
.flex-1{ flex:1; }
  
/* Détails textes (gris) */
.details{ color: var(--darkGrayB); }            /* 3.Texte détails */



/* =========================================================
   1) En-têtes & panneaux
   ========================================================= */
/* Header principal / Sous-header : fond blanc + bordure */
.header-session,
.subheader{
  position: sticky; top: 0; left:0; right:0; z-index: 5;
  display:flex; align-items:center; justify-content:space-between;
  padding: var(--pad-y) var(--pad-x);
  background: var(--white);                     /* 4.Header blanc */
  border-bottom: 2px solid var(--whiteB);       /* 4.Bordure basse whiteB */
}
.subheader{ z-index:4; }
.subheader .title{ font-weight: var(--fw-strong); }

/* =========================================================
   2) Tab bar (bas)
   ========================================================= */
.tabbar{
  position:fixed; bottom:0; left:0; right:0; z-index:10;
  height: var(--tab-h);
  display:flex;
  gap: 0;
  padding: 0;
  background: var(--white);                     /* 4.Tab bar fond blanc */
  border-top: 2px solid var(--whiteB);          /* 4.Bordure haute whiteB */
}
.tab{
  flex: 1 1 25%;
  height: 100%;
  box-sizing: border-box;
  font-size: 32px;
  display:flex; align-items:center; justify-content:center;
  padding: 0 var(--pad-x);
  background: transparent;
  border:3px solid transparent;
  cursor:pointer;
  user-select: none;
}
.tab.active{
  border-top: 3px solid var(--black);         /* 4.Onglet actif bordure haute noir */
}

/* =========================================================
   3) Contrôles unifiés (inputs, selects, tags, listes)
   ========================================================= */
/* Base champs & listes */
.input, select, textarea{
  height: var(--control-h);
  width: 100%;
  padding: 0 var(--pad-x);
  border-radius: var(--radius);
  border: 1px solid var(--black);
  background: var(--white);
  color: var(--darkGrayB);
  font-weight: var(--fw-base);
}
textarea{
  resize: vertical;
}

/* Focus/actif -> fond gris + bordure strong */
.input:focus,
select:focus,
textarea:focus{
  background: var(--darkGray);
  color: var(--black);
  font-weight: var(--fw-strong);
}

/* Valeur définie (non vide) — forcer style “défini” */
.has-value{
  color: var(--black);
  font-weight: var(--fw-strong);
}

/* Grosse image pour l'exécution */
image_big{
	 width:100%;
	 height:auto;
	 max-height:320px;
	 object-fit:cover;
	 border-radius:12px;
	 border:1px solid var(--lightGrayB);
	 background:var(--lightGray);
}

/* Panneaux/cartes (listes, cartes) */
.panel{
  background: var(--white);                     /* 4.Panneaux blancs */
  border: 1px solid var(--whiteB);              /* 4.Bordure whiteB */
  border-radius: var(--radius);
  padding: var(--pad-y) var(--pad-x);
}
.exercise-card{
  background: var(--white);
  border: 1px solid var(--black);
  border-radius: var(--radius);
  padding: var(--pad-y) var(--pad-x);
}
.exercise-card-row{ display:flex; align-items:center; justify-content:space-between; gap:var(--gap); }
.exercise-card-left{ display:flex; align-items:center; gap:10px; flex:1; min-width:0; }
.exercise-card-right{ display:flex; align-items:center; justify-content:flex-end; gap:8px; flex-shrink:0; min-width:40px; }
.exercise-card-text{ display:flex; flex-direction:column; gap:2px; min-width:0; }
.exercise-card-text .element,
.exercise-card-text .details{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.exercise-card-thumb{
  width:40px;
  height:40px;
  border-radius:8px;
  object-fit:cover;
  background:var(--lightGray)
  flex-shrink:0;
  border: 1px solid var(--lightGrayB);
}
.exercise-card.selected{
  background: var(--darkGray);
  color: var(--white);
}
.exercise-card.clickable{ cursor:pointer; user-select:none; border: var(--black);}
.exercise-card.selected .element,
.exercise-card.selected .details{
  color: var(--white);
}
.exercise-card-thumb.clickable{
  cursor: pointer;
  border-color: var(--black);
}
.exercise-card-check{
  width:20px;
  height:20px;
  cursor:pointer;
}
.exercise-card-eye{
  border:none;
  background:none;
  color:inherit;
  font-size:20px;
  line-height:1;
  cursor:pointer;
  padding:4px;
  border-radius:50%;
}
.exercise-card-eye:focus-visible{
  outline:2px solid var(--black);
  outline-offset:2px;
}
.exercise-thumb-placeholder{ object-fit:contain; }
.exercise-selection-bar{
  position:sticky;
  top:0;
  z-index:10;
  padding:8px 0;
  background:var(--white);
}
.exercise-selection-bar.hidden{ display:none; }
.exercise-hero-placeholder{ object-fit:contain; background:var(--lightGray); }


/* =========================================================
   4) Tags (sélecteurs multi/single)
   ========================================================= */
.tags{
  display:flex; flex-wrap:wrap;
  gap: 1px;                                    /* UN seul pixel d’écart */
}
.tag{
  height: var(--control-h);
  display:inline-flex; align-items:center; justify-content:center;
  padding: 0 12px;
  border-radius: var(--radius);
  border: 1px solid var(--black);
  background: var(--white);
  color: var(--darkGrayB);                      /* 3.Texte gris pour “non sélectionné” */
  user-select:none;
  cursor:pointer;
}
.tag.selected{
  background: var(--darkGrayB);                  /* 6.Tag cliqué */
  color: var(--white);
}

/* =========================================================
   5) Boutons
   ========================================================= */
.btn{
  height: var(--control-h);
  display:inline-flex; align-items:center; justify-content:center;
  padding: 0 var(--pad-x);
  border-radius: var(--radius);
  border: 1px solid var(--black);
  background: transparent;
  color: var(--black);
  font-weight: var(--fw-strong);
  cursor:pointer; user-select:none;
}

/* En-tête RETOUR */
.btn.ghost{
  border-color: var(--darkGrayB);
  color: var(--darkGrayB);
}

/* En-tête OK */
.btn.primary{
  border-color: var(--emphase);
  background: var(--emphase);
  color: var(--white);
}

/* Supprimer */
.btn.danger{
  border-color: var(--red);
  color: var(--red);
}

/* Image cliquable (ex: preview) */
.btn.image{
  border-color: var(--black);
}

/* Disabled */
.btn[disabled]{ opacity:.5; cursor:not-allowed; }

/* =========================================================
   6) Listes / Filtres (écran Bibliothèque)
   ========================================================= */
.list.cards{ display:flex; flex-direction:column; gap:var(--gap); margin-top:var(--gap); }
.filters{    display:flex; flex-direction:column; gap:var(--gap); margin-top:var(--gap); }
.form{       display:flex; flex-direction:column; gap:var(--gap); margin-top:var(--gap); }
.lbl{ font-weight: var(--fw-strong); }
.listing{ margin: 0; font-weight: var(--fw-strong); padding-left: 0; list-style-position: inside; }
.hint{ margin-top:6px; color: var(--darkGrayB); font-size: var(--fs-small); }
/* Placeholders d’images */
.exercise-row{
  display:grid; grid-template-columns: 64px 1fr auto;
  gap:10px; align-items:center;
  padding:8px 0; border-bottom:1px solid var(--whiteB);
}
.exercise-row img{
  width:64px; height:64px; object-fit:cover; border-radius:8px; background: var(--lightGray);
}

/* =========================================================
   7) Semaine & calendrier
   ========================================================= */
.week-strip{
  display:flex; gap:var(--gap); overflow-x:auto;
  padding-bottom:8px; margin-bottom:12px;
  border-bottom:1px dashed var(--whiteB);
  -webkit-overflow-scrolling:touch;
}
.week-strip .day{
  height: var(--control-h);
  display:flex; align-items:center; justify-content:center;
  padding: 0 var(--pad-x);
  border:1px solid var(--whiteB);
  border-radius: var(--radius);
  background: var(--whiteB);
  font-weight: var(--fw-strong);
  user-select:none; cursor:pointer;
  transition: transform .06s ease;
}
.week-strip .day:active{ transform: scale(.98); }

/* Règles de priorité: selected > has-session > planned */
.week-strip .day.planned{
  background: var(--backGrayB); color: #333; border-color: var(--backGrayB);
}
.week-strip .day.has-session{
  background: var(--black); color:#fff; border-color: var(--black);
}
.week-strip .day.selected{
  background: var(--emphase); color:#fff; border-color: var(--emphase);
}

/* Modale calendrier */
.modal{
  border:none; border-radius:14px; padding:0;
  max-width:420px; width:90vw;
}
.modal::backdrop{ background: rgba(0,0,0,.25); }
.modal-header{
  display:flex; justify-content:space-between; align-items:center;
  padding: var(--pad-y) var(--pad-x);
  border-bottom:1px solid var(--whiteB);
}
.big-calendar{ padding: var(--pad-y); }
.month-grid{ display:grid; grid-template-columns: repeat(7,1fr); gap:6px; }
.dow{ text-align:center; color: var(--darkGrayB); font-weight: var(--fw-strong); }
.day-cell{
  padding:8px 0; border:1px solid var(--whiteB); border-radius:8px;
  background:#fafafa; cursor:pointer; user-select:none;
  transition: transform .06s ease;
}
.day-cell:active{ transform: scale(.98); }
.day-cell.planned{ background: var(--backGrayB); color:#333; border-color: var(--backGrayB); }
.day-cell.has-session{ background: var(--black); color:#fff; border-color: var(--black); }
.day-cell.selected{ background: var(--emphase); color:#fff; border-color: var(--emphase); }

/* =========================================================
   8) Séance du jour & séries
   ========================================================= */
.session-list{ display:flex; flex-direction:column; gap:12px; margin:16px 0; }
.element{ font-weight: var(--fw-strong); }

/* Grille des séries (3 par ligne) */
.set-grid{
  display:grid; grid-template-columns: repeat(3,1fr);
  gap: var(--gap); margin-top: var(--gap);
}
.set-cell{
  border:1px solid var(--whiteB);
  border-radius: var(--radius);
  padding: 8px 10px;
  text-align:center;
  font-size: var(--fs-small);                 /* 3.Texte plus petit */
}
.set-cell sup{ font-size:.7em; color: var(--darkGrayB); }
.set-cell .rpe{ font-size: var(--fs-rpe); }   /* 3.RPE a sa propre taille */

/* État “vide” */
.empty{
  color: var(--darkGrayB);
  border:1px dashed var(--whiteB);
  border-radius: var(--radius);
  padding: 12px; text-align:center;
}

/* =========================================================
   9) Édition exécution (Colonne A) & Timer
   ========================================================= */
.exec-grid{
  display:grid; gap:8px; margin-top:8px;
  grid-template-columns: 1.2fr 1.2fr .8fr .8fr auto; /* Reps | Poids | RPE | Repos | Action */
  text-align:center; align-items:center;
}
.exec-head{ font-weight: var(--fw-strong); }
.exec-row .input{
  height: var(--control-h); width:100%;
  text-align:center; margin:0; padding:0 8px;
}

/* Stepper vertical */
.vstepper{ display:flex; flex-direction:column; gap:4px; }
.vstepper .btn{ min-height:32px; line-height:1; }

/* number sans flèches natives */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
input[type="number"]{ -moz-appearance:textfield; }

/* RPE chips (couleurs existantes) */
.rpe-chip{ display:inline-block; padding:4px 8px; border-radius:999px; color:#fff; font-weight: var(--fw-strong); font-size:.9em; }
.rpe-5{ background:#3a7; } .rpe-6{ background:#3c8; } .rpe-7{ background:#6c6; }
.rpe-8{ background:#c93; } .rpe-9{ background:#d55; } .rpe-10{ background:#a00; }

/* Champs spécifiques */
.exec-row input[placeholder="mm:ss"]{ text-align:center; max-width:90px; margin:0 auto; }
.rpe-wrap .input{ max-width:70px; margin:0 auto; }

/* Timer bas */
.exec-timer{
  position:sticky; bottom:0; z-index:5;
  display:grid; grid-template-columns: 1fr 2fr 1fr;
  align-items:center; gap:8px;
  padding:10px 12px;
  background: var(--white);
  border-top:1px solid var(--whiteB);
}
.exec-timer .tmr-center{ display:flex; align-items:center; justify-content:center; gap:10px; }
.tmr-display{ font-weight: var(--fw-strong); min-width:76px; text-align:center; }
.exec-timer .btn.ghost{ border:1px solid var(--whiteB); }

/* =========================================================
   10) Responsivité
   ========================================================= */
@media (min-width: 720px){
  .content{ padding-left:16px; padding-right:16px; }
}
