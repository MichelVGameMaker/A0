<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover", maximum-scale=1", user-scalable=no"/>

  <title>Muscu â€¢ SÃ©ances</title>

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" href="./icons/icon-192.png">
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />

  <!-- Manifest + CSS -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ========== 3.4. SÃ©ance  ========== -->
<section id="screenSessions" class="screen">
    
    <!-- En-tÃªte (spÃ©cifique Ã  l'Ã©cran SÃ©ances) -->
    <header class="header-session safe-top">
        <div class="header-left">
            <button id="btnPrevSession" class="btn ghost" title="SÃ©ance prÃ©cÃ©dente">â—€ï¸</button>
        </div>

        <div class="header-center">
		<span id="todayLabel">â€”</span>
		<button id="btnQuickNav" class="btn ghost" title="Calendrier">ğŸ“…</button>
        </div>

        <div class="header-right">
		<button id="btnNextSession" class="btn ghost" title="SÃ©ance suivante">â–¶ï¸</button>
        </div>
    </header>
    
    <!-- Corps de l'Ã©cran SÃ©ances) -->
    <main class="content">
  
        <!-- Calendrier 1 semaine dÃ©filable -->
        <section class="week-strip" id="weekStrip" aria-label="Calendrier 1 semaine"></section>
  
        <!-- Liste des exercices de la sÃ©ance -->
        <section id="sessionList" class="session-list" aria-label="SÃ©ance du jour"></section>
  
        <!-- Boutons d'ajout (2 lignes) -->
        <div class="bloque">
            <div class="row">
                <label for="selectRoutine" class="sr-only">Ajouter une routine</label>
                <select id="selectRoutine" class="input flex-1">
                <option value="">Ajouter une routineâ€¦</option>
                </select>
                <button id="btnAddRoutine" class="btn">Ajouter</button>
            </div>
            <div class="row"> 
                <button id="btnAddExercises" class="btn full">Ajouter exercice/s</button>
            </div>
        </div>		
    </main>
    
  </section>
  <!-- ==================== -->

  <!-- ========== 3.4.2 Modifier lâ€™exÃ©cution (Colonne A uniquement) ========== -->
  <section id="screenExecEdit" class="screen" hidden>
    <header class="subheader">
      <button class="btn ghost" id="execBack">â†</button>
      <div class="title" id="execTitle">Exercice</div>
      <button class="btn" id="execOk">OK</button>
    </header>
  
    <main class="content">
      <div class="details" id="execDate">â€”</div>
  
      <!-- EntÃªte colonnes -->
      <div class="exec-grid exec-head">
        <div>Reps</div>
        <div>Poids</div>
        <div>RPE</div>
        <div>Repos</div>
        <div></div>
      </div>
  
      <!-- SÃ©ries exÃ©cutÃ©es (lecture seule) -->
      <div id="execExecuted"></div>
  
      <!-- Zone sÃ©rie en cours (1 seule ligne Ã©ditable quand des prÃ©vues existent),
           sinon une ligne â€œNouvelle sÃ©rieâ€ -->
      <div id="execEditable"></div>
  
      <div class="add-actions">
        <button id="execRestToggle" class="btn primary full">Repos</button>
      </div>
  
      <!-- (Colonnes B/C rÃ©servÃ©es pour plus tard) -->


    </main>
    
      <!-- âœ… Barre de timer collante en bas -->
      <footer id="execTimerBar" class="exec-timer" hidden>
        <!-- Q1: pause/play -->
        <button id="tmrToggle" class="btn ghost">â¸</button>
        <!-- Q2+Q3: timer avec - [temps] + -->
        <div class="tmr-center">
          <button id="tmrMinus" class="btn ghost">âˆ’10s</button>
          <div id="tmrDisplay" class="tmr-display">0:00</div>
          <button id="tmrPlus" class="btn ghost">+10s</button>
        </div>
      </footer>
    
  </section>
  <!-- ==================== -->
 
  <!-- ========== 3.1.1 BibliothÃ¨que dâ€™exercices (liste) ========== -->
  <section id="screenExercises" class="screen" hidden>
    
    <!-- En-tÃªte -->
    <header class="subheader">
      <button class="btn" id="exBackList">â†</button>
      <div class="title">Exercices</div>
      <button class="btn primary" id="exOkList">OK</button>
    </header>

    <!-- Corps de l'Ã©cran Exercices) -->
    <main class="content">
      
		<!-- Cartouche haut -->
		<div class="bloque">
		
			<div class="row">
				<input id="exSearch" class="input full" placeholder="Rechercher par nomâ€¦" />
			</div>
			
			<div class="row">
				<select id="exFilterGroup" class="input flex-1">
					<option value="">Groupe musculaire</option>
				</select> 
				<select id="exFilterEquip" class="input flex-1">
					<option value="">MatÃ©riel</option>
				</select>
			</div>
		
      </div>
 
		<!-- Cartouche bas : Liste -->
		<section id="exList" class="bloque" aria-label="BibliothÃ¨que dâ€™exercices"></section>
      
	</main>    
  </section>
  <!-- ==================== -->
 
  <!-- ========== 3.1.2A Consulter un exercice ========== -->
  <section id="screenExerciseRead" class="screen" hidden>
    
    <!-- En-tÃªte -->
    <header class="subheader">
      <button class="btn" id="exReadBack">â†</button>
      <div class="title" id="exReadTitle">Exercice</div>
      <button class="btn" id="exReadEdit">âœï¸ Editer</button>
    </header>


	<!-- Corps de l'Ã©cran Consulter un Exercice) -->
	<main class="content">

		<div class="panel" style="display:flex;flex-direction:column;gap:12px;">
			<!-- Image / GIF -->
			<img id="exReadHero" alt="aperÃ§u exercice" class="image_big" />

			<!-- Lignes dâ€™info -->
			<div id="exReadMuscle"    class="element"></div>
			<div id="exReadEquipment" class="details"></div>

			<!-- Instructions -->
			<div>
				<div class="lbl">Instructions</div>
				<ol id="exReadInstruc" class="listing"></ol>
			</div>
		</div>
 
	</main>  
  </section>
  <!-- ==================== -->
  
  <!-- ========== 3.1.2B Ajouter / Modifier un exercice ========== -->
  <section id="screenExerciseEdit" class="screen" hidden>
    
    <!-- En-tÃªte -->
    <header class="subheader">
      <button class="btn" id="exEditBack">â†</button>
      <div class="title" id="exEditTitle">Ajouter</div>
      <button class="btn" id="exEditOk">OK</button>
    </header>


	<!-- Corps de l'Ã©cran Ajouter / Modifier Exercices) -->
	<main class="content">

		<!-- Cartouche haut -->
		<div class="bloque">   		
			<div class="row">
				<button id="exEditDelete" class="btn danger full">ğŸ—‘ï¸ Supprimer</button>
			</div>
		</div>
		
		<!-- Cartouche bas : Formulaire -->
		<div class="bloque">
	  
			<label class="lbl">Nom</label>
			<input id="exName" class="input full" placeholder="Nom de lâ€™exercice" />
	 
			<label class="lbl">MatÃ©riel</label>
			<div id="exEquip" class="tags"></div>
			
			<label class="lbl">Muscle ciblÃ©</label>
			<select id="exTargetMuscle" class="input full">
			  <option value="">Choisirâ€¦</option>
			</select>
			
			<div id="exGroupInfo" class="hint"></div>
			
			<label class="lbl">Muscles secondaires</label>
			<div id="exSecMuscles" class="tags"></div>
	  
			<label class="lbl">Image (URL)</label>
			<input id="exImage" class="input full" type="url" placeholder="https://â€¦ ou ./data/media/xxx.gif" />

			<label class="lbl">Instructions (1 par ligne)</label>
			<textarea id="exInstr" class="input full" rows="8" placeholder="Ã‰tape 1â€¦
Ã‰tape 2â€¦"></textarea>
 
		</div>

	   
	</main>  
  </section>
  <!-- ==================== -->

  <!-- Barre dâ€™onglets fixe (icÃ´nes) -->
  <nav class="tabbar safe-bottom" aria-label="Navigation principale">
    <button id="tabSessions" class="tab active" title="SÃ©ances" aria-label="SÃ©ances">ğŸ‹ï¸</button>
    <button id="tabLibraries" class="tab" title="BibliothÃ¨ques" aria-label="BibliothÃ¨ques">ğŸ“š</button>
    <button id="tabStats" class="tab" title="Statistiques" aria-label="Statistiques">ğŸ“ˆ</button>
    <button id="tabSettings" class="tab" title="RÃ©glages" aria-label="RÃ©glages">âš™ï¸</button>
  </nav>

  
  <!-- ==========  Modale calendrier (Navigation rapide) ========== -->
  <dialog id="dlgCalendar" class="modal">
  <div class="modal-header">
    <button id="calPrev" class="btn ghost" aria-label="Mois prÃ©cÃ©dent">â—€ï¸</button>
    <strong id="calTitle">Calendrier</strong>
    <div style="display:flex; gap:8px;">
      <button id="calNext" class="btn ghost" aria-label="Mois suivant">â–¶ï¸</button>
      <button id="dlgClose" class="btn ghost">Fermer</button>
    </div>
  </div>
  <div id="bigCalendar" class="big-calendar"></div>
</dialog>
  <!-- ==================== -->
  
  <!-- ==================== -->
  <!-- JS (ordre important) -->
	<script src="cfg.js"></script> 
	<script src="db.js"></script>
	<script src="state.js"></script>
	<script src="ui-week.js"></script>
	<script src="ui-calendar.js"></script>
	<script src="ui-session.js"></script>
	<script src="ui-exercise-read.js"></script>
	<script src="ui-exercise-edit.js"></script>
	<script src="ui-exercises_list.js"></script>
	<script src="ui-exec-edit.js"></script>
	<script src="init.js"></script>
	<script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js');
      });
    }
  </script>
  <!-- ==================== -->
  
</body>
</html>
