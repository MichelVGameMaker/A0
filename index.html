<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Muscu ‚Ä¢ S√©ances</title>

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" href="./icons/icon-192.png">
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />

  <!-- Manifest + CSS -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ========== 3.4. S√©ance  ========== -->
  <section id="screenSessions" class="screen">
    
    <!-- En-t√™te (sp√©cifique √† l'√©cran S√©ances) -->
    <header class="header-session safe-top">
	  <div class="header-left">
		<button id="btnPrevSession" class="btn ghost" title="S√©ance pr√©c√©dente">‚óÄÔ∏é</button>
	 </div>

	  <div class="header-center">
		<span id="todayLabel">‚Äî</span>
		<button id="btnQuickNav" class="btn ghost" title="Calendrier">üìÖ</button>
	  </div>

	  <div class="header-right">
		<button id="btnNextSession" class="btn ghost" title="S√©ance suivante">‚ñ∂Ô∏é</button>
	   </div>
	</header>
    
    <!-- Corps de l'√©cran S√©ances) -->
    <main class="content">
  
      <!-- Calendrier 1 semaine d√©filable -->
      <section class="week-strip" id="weekStrip" aria-label="Calendrier 1 semaine"></section>
  
      <!-- Liste des exercices de la s√©ance -->
      <section id="sessionList" class="session-list" aria-label="S√©ance du jour"></section>
  
      <!-- Boutons d'ajout (2 lignes) -->
      <section class="add-actions" id="addActions">
        <!-- Ligne 1 : S√©lecteur Ajouter <routine> (pr√©-s√©lection = routine pr√©vue du jour) -->
        <div class="row">
          <label for="selectRoutine" class="sr-only">Ajouter une routine</label>
          <select id="selectRoutine" class="input flex-1">
            <option value="">Ajouter une routine‚Ä¶</option>
          </select>
          <button id="btnAddRoutine" class="btn">Ajouter</button>
        </div>
  
        <!-- Ligne 2 : Ajouter exercices (ouvre la biblioth√®que) -->
        <button id="btnAddExercises" class="btn">Ajouter exercice/s</button>
      </section>
    </main>
    
  </section>
  <!-- ==================== -->

  <!-- ========== 3.4.2 Modifier l‚Äôex√©cution (Colonne A uniquement) ========== -->
  <section id="screenExecEdit" class="screen" hidden>
    <header class="subheader">
      <button class="btn ghost" id="execBack">‚Üê</button>
      <div class="title" id="execTitle">Exercice</div>
      <button class="btn" id="execOk">OK</button>
    </header>
  
    <main class="content">
      <div class="details" id="execDate">‚Äî</div>
  
      <!-- Ent√™te colonnes -->
      <div class="exec-grid exec-head">
        <div>Reps</div>
        <div>Poids</div>
        <div>RPE</div>
        <div>Repos</div>
        <div></div>
      </div>
  
      <!-- S√©ries ex√©cut√©es (lecture seule) -->
      <div id="execExecuted"></div>
  
      <!-- Zone s√©rie en cours (1 seule ligne √©ditable quand des pr√©vues existent),
           sinon une ligne ‚ÄúNouvelle s√©rie‚Äù -->
      <div id="execEditable"></div>
  
      <div class="add-actions">
        <button id="execRestToggle" class="btn primary full">Repos</button>
      </div>
  
      <!-- (Colonnes B/C r√©serv√©es pour plus tard) -->


    </main>
    
      <!-- ‚úÖ Barre de timer collante en bas -->
      <footer id="execTimerBar" class="exec-timer" hidden>
        <!-- Q1: pause/play -->
        <button id="tmrToggle" class="btn ghost">‚è∏</button>
        <!-- Q2+Q3: timer avec - [temps] + -->
        <div class="tmr-center">
          <button id="tmrMinus" class="btn ghost">‚àí10s</button>
          <div id="tmrDisplay" class="tmr-display">0:00</div>
          <button id="tmrPlus" class="btn ghost">+10s</button>
        </div>
      </footer>
    
  </section>
  <!-- ==================== -->
 
  <!-- ========== 3.1.1 Biblioth√®que d‚Äôexercices (liste) ========== -->
  <section id="screenExercises" class="screen" hidden>
    
    <!-- En-t√™te -->
    <header class="subheader">
      <button class="btn ghost" id="exBackList" disabled>‚Üê</button>
      <div class="title">Exercices</div>
      <button class="btn ghost" id="exOkList" disabled>OK</button>
    </header>

    <!-- Corps de l'√©cran Exercices) -->
    <main class="content">
      
      <!-- Recherche + filtres -->
      <div class="filters">
        <input id="exSearch" class="input full" placeholder="Rechercher par nom‚Ä¶" />
        <div class="row">
          <select id="exFilterGroup" class="input flex-1">
            <option value="">Groupe musculaire</option>
            <option value="Pectoraux">Pectoraux</option>
            <option value="Dos">Dos</option>
            <option value="√âpaules">√âpaules</option>
            <option value="Biceps">Biceps</option>
            <option value="Triceps">Triceps</option>
            <option value="Quadriceps">Quadriceps</option>
            <option value="Ischio">Ischio</option>
            <option value="Mollets">Mollets</option>
            <option value="Abdos">Abdos</option>
            <option value="Cardio">Cardio</option>
          </select>
          <select id="exFilterEquip" class="input flex-1">
            <option value="">Mat√©riel</option>
            <option value="Machine">Machine</option>
            <option value="Poids">Poids</option>
            <option value="Poids de corps">Poids de corps</option>
            <option value="√âlastique">√âlastique</option>
            <option value="Barre">Barre</option>
            <option value="Autre">Autre</option>
          </select>
        </div>
      </div>
    
      <!-- Bouton Ajouter -->
      <div class="add-actions">
        <button id="btnExAdd" class="btn primary full">+ Ajouter un exercice</button>
      </div>
    
      <!-- Liste -->
      <section id="exList" class="list cards" aria-label="Biblioth√®que d‚Äôexercices"></section>
      
    </main>    
  </section>
  <!-- ==================== -->
    
  <!-- ========== 3.1.2 Ajouter / Modifier un exercice ========== -->
  <section id="screenExerciseEdit" class="screen" hidden>
    
    <!-- En-t√™te -->
    <header class="subheader">
      <button class="btn ghost" id="exEditBack">‚Üê</button>
      <div class="title" id="exEditTitle">Ajouter</div>
      <button class="btn" id="exEditOk">OK</button>
    </header>

    <!-- Corps de l'√©cran Ajouter / Modifier Exercices) -->
    <main class="content">
      
      <!-- Zone suppression -->
      <div class="add-actions">
        <button id="exEditDelete" class="btn" style="border-color:#c00;color:#c00">üóëÔ∏è Supprimer</button>
      </div>
    
      <!-- Formulaire -->
      <div class="form">
        <label class="lbl">Nom</label>
        <input id="exName" class="input full" placeholder="Nom de l‚Äôexercice" />
    
        <label class="lbl">Groupe musculaire fin</label>
        <select id="exGroup3" class="input full">
          <option value="">Choisir‚Ä¶</option>
          <option value="Pectoraux">Pectoraux</option>
          <option value="Dos">Dos</option>
          <option value="√âpaules">√âpaules</option>
          <option value="Biceps">Biceps</option>
          <option value="Triceps">Triceps</option>
          <option value="Quadriceps">Quadriceps</option>
          <option value="Ischio">Ischio</option>
          <option value="Mollets">Mollets</option>
          <option value="Abdos">Abdos</option>
          <option value="Cardio">Cardio</option>
        </select>
    
        <label class="lbl">Mat√©riel</label>
        <select id="exEquip" class="input full">
          <option value="">Choisir‚Ä¶</option>
          <option value="Machine">Machine</option>
          <option value="Poids">Poids</option>
          <option value="Poids de corps">Poids de corps</option>
          <option value="√âlastique">√âlastique</option>
          <option value="Barre">Barre</option>
          <option value="Autre">Autre</option>
        </select>
    
        <label class="lbl">Description</label>
        <textarea id="exDesc" class="input full" rows="4" placeholder="Facultatif"></textarea>
      </div>
      
  </main>  
  </section>
  <!-- ==================== -->

  <!-- Barre d‚Äôonglets fixe (ic√¥nes) -->
  <nav class="tabbar safe-bottom" aria-label="Navigation principale">
    <button id="tabSessions" class="tab active" title="S√©ances" aria-label="S√©ances">üèãÔ∏è</button>
    <button id="tabLibraries" class="tab" title="Biblioth√®ques" aria-label="Biblioth√®ques">üìö</button>
    <button id="tabStats" class="tab" title="Statistiques" aria-label="Statistiques">üìà</button>
    <button id="tabSettings" class="tab" title="R√©glages" aria-label="R√©glages">‚öôÔ∏è</button>
  </nav>

  
  <!-- ==========  Modale calendrier (Navigation rapide) ========== -->
  <dialog id="dlgCalendar" class="modal">
  <div class="modal-header">
    <button id="calPrev" class="btn ghost" aria-label="Mois pr√©c√©dent">‚óÄÔ∏é</button>
    <strong id="calTitle">Calendrier</strong>
    <div style="display:flex; gap:8px;">
      <button id="calNext" class="btn ghost" aria-label="Mois suivant">‚ñ∂Ô∏é</button>
      <button id="dlgClose" class="btn ghost">Fermer</button>
    </div>
  </div>
  <div id="bigCalendar" class="big-calendar"></div>
</dialog>
  <!-- ==================== -->
  
  <!-- ==================== -->
  <!-- JS (ordre important) -->
  <script src="cfg.js"></script> 
  <script src="db.js"></script>
  <script src="state.js"></script>
  <script src="ui-week.js"></script>
  <script src="ui-calendar.js"></script>
  <script src="ui-session.js"></script>
  <script src="ui-exercises.js"></script>
  <script src="ui-exercise-edit.js"></script>
  <script src="ui-exec-edit.js"></script>
  <script src="init.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js');
      });
    }
  </script>
  <!-- ==================== -->
  
</body>
</html>
