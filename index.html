<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Muscu • Séances</title>

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- Manifest + CSS -->
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- En-tête (spécifique à l'écran Séances) -->
  <header class="header-session safe-top">
    
    <div class="header-left">
      <span id="todayLabel">—</span>
    </div>

    <div class="header-right">
      <button id="btnQuickNav" class="btn ghost" title="Calendrier">📅</button>
    </div>

  </header>

  <main class="content">
    <!-- Calendrier 1 semaine défilable -->
    <section class="week-strip" id="weekStrip" aria-label="Calendrier 1 semaine"></section>

    <!-- Liste des exercices de la séance -->
    <section id="sessionList" class="session-list" aria-label="Séance du jour"></section>

    <!-- Boutons d'ajout -->
    <section class="add-actions" id="addActions">
      <button id="btnAddPlanned" class="btn primary full">Ajouter &lt;routine&gt;</button>
      <div class="row">
        <label for="selectRoutine" class="sr-only">Ajouter une routine</label>
        <select id="selectRoutine" class="input flex-1">
          <option value="">Ajouter une routine…</option>
        </select>
        <button id="btnAddRoutine" class="btn">Ajouter</button>
      </div>
      <button id="btnAddExercises" class="btn">Ajouter exercice/s</button>
    </section>
  </main>

  <!-- Barre d’onglets fixe (icônes) -->
  <nav class="tabbar safe-bottom" aria-label="Navigation principale">
    <button class="tab active" title="Séances" aria-label="Séances">🏋️</button>
    <button class="tab" title="Bibliothèques" aria-label="Bibliothèques">📚</button>
    <button class="tab" title="Statistiques" aria-label="Statistiques">📈</button>
    <button class="tab" title="Réglages" aria-label="Réglages">⚙️</button>
  </nav>

  <!-- Modale calendrier (Navigation rapide) -->
  <dialog id="dlgCalendar" class="modal">
  <div class="modal-header">
    <button id="calPrev" class="btn ghost" aria-label="Mois précédent">◀︎</button>
    <strong id="calTitle">Calendrier</strong>
    <div style="display:flex; gap:8px;">
      <button id="calNext" class="btn ghost" aria-label="Mois suivant">▶︎</button>
      <button id="dlgClose" class="btn ghost">Fermer</button>
    </div>
  </div>
  <div id="bigCalendar" class="big-calendar"></div>
</dialog>

  <!-- JS (ordre important) -->
  <script src="db.js"></script>
  <script src="state.js"></script>
  <script src="ui-week.js"></script>
  <script src="ui-calendar.js"></script>
  <script src="ui-session.js"></script>
  <script src="init.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js');
      });
    }
  </script>
</body>
</html>
